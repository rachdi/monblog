(function() {
  var expect, video;

  video = require('../client/video');

  expect = require('expect.js');

  describe('video plugin', function() {
    describe('parsing', function() {
      it('parses string', function() {
        var result;
        result = video.parse('YOUTUBE a1234\nDummy caption\nMore caption text');
        expect(result.player).to.be('YOUTUBE');
        expect(result.key).to.be('a1234');
        return expect(result.caption).to.be(' Dummy caption More caption text ');
      });
      return it('allows video declaration to be below caption', function() {
        var result;
        result = video.parse('Dummy caption\nMore caption text\nYOUTUBE a1234');
        expect(result.player).to.be('YOUTUBE');
        expect(result.key).to.be('a1234');
        return expect(result.caption).to.be(' Dummy caption More caption text ');
      });
    });
    return describe('embedding', function() {
      it('renders Youtube video', function() {
        var embed;
        embed = video.embed({
          player: 'YOUTUBE',
          options: '',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/www\.youtube-nocookie\.com\/embed\/12345\?rel=0"/);
      });
      it('renders Youtube playlist', function() {
        var embed;
        embed = video.embed({
          player: 'YOUTUBE',
          options: 'PLAYLIST',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/www\.youtube-nocookie\.com\/embed\/videoseries\?list=12345"/);
      });
      it('renders Vimeo video', function() {
        var embed;
        embed = video.embed({
          player: 'VIMEO',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/player.vimeo.com\/video\/12345\?title=0&amp;byline=0&amp;portrait=0"/);
      });
      it('renders Archive video', function() {
        var embed;
        embed = video.embed({
          player: 'ARCHIVE',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/archive.org\/embed\/12345"/);
      });
      it('renders TED video', function() {
        var embed;
        embed = video.embed({
          player: 'TED',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/embed-ssl.ted.com\/talks\/12345.html"/);
      });
      it('renders TEDX video', function() {
        var embed;
        embed = video.embed({
          player: 'TEDX',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="http:\/\/tedxtalks.ted.com\/video\/12345\/player\?layout=&amp;read_more=1"/);
      });
      it('renders CHANNEL9 video', function() {
        var embed;
        embed = video.embed({
          player: 'CHANNEL9',
          key: '12345'
        });
        return expect(embed).to.match(/<iframe[^>]*src="https:\/\/channel9.msdn.com\/12345\/player"/);
      });
      return it('renders fallback text when player is not recognized', function() {
        var embed;
        embed = video.embed({
          player: 'DUMMY',
          key: '12345'
        });
        return expect(embed).to.be("(unknown player)");
      });
    });
  });

}).call(this);

//# sourceMappingURL=test.js.map
